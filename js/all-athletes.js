(function(e,b){function c(b,e){for(var c=decodeURI(b),c=G[e?"strict":"loose"].exec(c),g={attr:{},param:{},seg:{}},s=14;s--;)g.attr[H[s]]=c[s]||"";g.param.query={};g.param.fragment={};g.attr.query.replace(B,function(b,c,e){c&&(g.param.query[c]=e)});g.attr.fragment.replace(v,function(b,c,e){c&&(g.param.fragment[c]=e)});g.seg.path=g.attr.path.replace(/^\/+|\/+$/g,"").split("/");g.seg.fragment=g.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");g.attr.base=g.attr.host?g.attr.protocol+"://"+g.attr.host+
(g.attr.port?":"+g.attr.port:""):"";return g}function g(c){c=c.tagName;return c!==b?I[c.toLowerCase()]:c}var I={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},H="source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,fragment".split(","),y={anchor:"fragment"},G={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},
B=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,v=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;e.fn.url=function(b){var c="";this.length&&(c=e(this).attr(g(this[0]))||"");return e.url(c,b)};e.url=function(e,g){1===arguments.length&&!0===e&&(g=!0,e=b);e=e||window.location.toString();return{data:c(e,g||!1),attr:function(c){c=y[c]||c;return c!==b?this.data.attr[c]:this.data.attr},param:function(c){return c!==b?this.data.param.query[c]:this.data.param.query},fparam:function(c){return c!==b?this.data.param.fragment[c]:this.data.param.fragment},
segment:function(c){if(c===b)return this.data.seg.path;c=0>c?this.data.seg.path.length+c:c-1;return this.data.seg.path[c]},fsegment:function(c){if(c===b)return this.data.seg.fragment;c=0>c?this.data.seg.fragment.length+c:c-1;return this.data.seg.fragment[c]}}}})(jQuery);(function(e,b,c,g,I,H){function y(a,d){var b=typeof a[d];return"function"==b||!!("object"==b&&a[d])||"unknown"==b}function G(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");J=Array.prototype.slice.call(a.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);P=9<parseInt(J[0],10)&&0<parseInt(J[1],10);return!0}catch(d){return!1}}function B(){if(!z){z=!0;for(var a=0;a<K.length;a++)K[a]();K.length=0}}function v(a,d){z?a.call(d):K.push(function(){a.call(d)})}function Z(){var a=parent;
if(""!==E)for(var d=0,b=E.split(".");d<b.length;d++)a=a[b[d]];return a.easyXDM}function p(a){var d=a.toLowerCase().match(L),a=d[2],b=d[3],d=d[4]||"";if("http:"==a&&":80"==d||"https:"==a&&":443"==d)d="";return a+"//"+b+d}function D(a){a=a.replace($,"$1/");if(!a.match(/^(http||https):\/\//)){var d="/"===a.substring(0,1)?"":c.pathname;"/"!==d.substring(d.length-1)&&(d=d.substring(0,d.lastIndexOf("/")+1));a=c.protocol+"//"+c.host+d+a}for(;U.test(a);)a=a.replace(U,"");return a}function A(a,d){var b="",
c=a.indexOf("#");-1!==c&&(b=a.substring(c),a=a.substring(0,c));var c=[],h;for(h in d)d.hasOwnProperty(h)&&c.push(h+"="+H(d[h]));return a+(V?"#":-1==a.indexOf("?")?"?":"&")+c.join("&")+b}function s(a){return"undefined"===typeof a}function q(a,d,b){var c,h;for(h in d)d.hasOwnProperty(h)&&(h in a?(c=d[h],"object"===typeof c?q(a[h],c,b):b||(a[h]=d[h])):a[h]=d[h]);return a}function x(a){if(s(Q)){var d=b.body.appendChild(b.createElement("form")),c=d.appendChild(b.createElement("input"));c.name=t+"TEST"+
W;Q=c!==d.elements[c.name];b.body.removeChild(d)}Q?d=b.createElement('<iframe name="'+a.props.name+'"/>'):(d=b.createElement("IFRAME"),d.name=a.props.name);d.id=d.name=a.props.name;delete a.props.name;a.onLoad&&u(d,"load",a.onLoad);if("string"==typeof a.container)a.container=b.getElementById(a.container);if(!a.container)q(d.style,{position:"absolute",top:"-2000px"}),a.container=b.body;c=a.props.src;delete a.props.src;q(d,a.props);d.border=d.frameBorder=0;d.allowTransparency=!0;a.container.appendChild(d);
d.src=c;a.props.src=c;return d}function T(a){var d=a.protocol,j;a.isHost=a.isHost||s(r.xdm_p);V=a.hash||!1;if(!a.props)a.props={};if(a.isHost){if(a.remote=D(a.remote),a.channel=a.channel||"default"+W++,a.secret=Math.random().toString(16).substring(2),s(d))p(c.href)==p(a.remote)?d="4":y(e,"postMessage")||y(b,"postMessage")?d="1":a.swf&&y(e,"ActiveXObject")&&G()?d="6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?d="5":a.remoteHelper?(a.remoteHelper=D(a.remoteHelper),
d="2"):d="0"}else{a.channel=r.xdm_c;a.secret=r.xdm_s;a.remote=r.xdm_e;var d=r.xdm_p,m;if(m=a.acl){a:{m=a.acl;var h=a.remote;"string"==typeof m&&(m=[m]);for(var k,i=m.length;i--;)if(k=m[i],k=RegExp("^"==k.substr(0,1)?k:"^"+k.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),k.test(h)){m=!0;break a}m=!1}m=!m}if(m)throw Error("Access denied for "+a.remote);}a.protocol=d;switch(d){case "0":q(a,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(a.isHost){if(!a.local){d=c.protocol+"//"+
c.host;j=b.body.getElementsByTagName("img");for(h=j.length;h--;)if(m=j[h],m.src.substring(0,d.length)===d){a.local=m.src;break}if(!a.local)a.local=e}d={xdm_c:a.channel,xdm_p:0};a.local===e?(a.usePolling=!0,a.useParent=!0,a.local=c.protocol+"//"+c.host+c.pathname+c.search,d.xdm_e=a.local,d.xdm_pa=1):d.xdm_e=D(a.local);if(a.container)a.useResize=!1,d.xdm_po=1;a.remote=A(a.remote,d)}else q(a,{channel:r.xdm_c,remote:r.xdm_e,useParent:!s(r.xdm_pa),usePolling:!s(r.xdm_po),useResize:a.useParent?!1:a.useResize});
j=[new f.stack.HashTransport(a),new f.stack.ReliableBehavior({}),new f.stack.QueueBehavior({encode:!0,maxLength:4E3-a.remote.length}),new f.stack.VerifyBehavior({initiate:a.isHost})];break;case "1":j=[new f.stack.PostMessageTransport(a)];break;case "2":j=[new f.stack.NameTransport(a),new f.stack.QueueBehavior,new f.stack.VerifyBehavior({initiate:a.isHost})];break;case "3":j=[new f.stack.NixTransport(a)];break;case "4":j=[new f.stack.SameOriginTransport(a)];break;case "5":j=[new f.stack.FrameElementTransport(a)];
break;case "6":J||G(),j=[new f.stack.FlashTransport(a)]}j.push(new f.stack.QueueBehavior({lazy:a.lazy,remove:!0}));return j}function X(a){for(var d,b={incoming:function(a,d){this.up.incoming(a,d)},outgoing:function(a,d){this.down.outgoing(a,d)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},c=0,h=a.length;c<h;c++){d=a[c];q(d,b,!0);if(0!==c)d.down=a[c-1];if(c!==h-1)d.up=a[c+1]}return d}function aa(a){a.up.down=a.down;a.down.up=a.up;
a.up=a.down=null}var M=this,W=Math.floor(1E4*Math.random()),R=Function.prototype,L=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,U=/[\-\w]+\/\.\.\//,$=/([^:])\/\//g,E="",f={},ba=e.easyXDM,t="easyXDM_",Q,V=!1,J,P,u,C;if(y(e,"addEventListener"))u=function(a,d,b){a.addEventListener(d,b,!1)},C=function(a,d,b){a.removeEventListener(d,b,!1)};else if(y(e,"attachEvent"))u=function(a,d,b){a.attachEvent("on"+d,b)},C=function(a,d,b){a.detachEvent("on"+d,b)};else throw Error("Browser not supported");var z=!1,K=[],N;"readyState"in
b?(N=b.readyState,z="complete"==N||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==N||"interactive"==N)):z=!!b.body;if(!z){if(y(e,"addEventListener"))u(b,"DOMContentLoaded",B);else if(u(b,"readystatechange",function(){"complete"==b.readyState&&B()}),b.documentElement.doScroll&&e===top){var Y=function(){if(!z){try{b.documentElement.doScroll("left")}catch(a){g(Y,1);return}B()}};Y()}u(e,"load",B)}var r=function(a){for(var a=a.substring(1).split("&"),d={},b,c=a.length;c--;)b=a[c].split("="),
d[b[0]]=I(b[1]);return d}(/xdm_e=/.test(c.search)?c.search:c.hash),S=function(){var a={},d={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(d).replace(/\s/g,""))return JSON;if(Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(d).replace(/\s/g,""))a.stringify=Object.toJSON;if("function"===typeof String.prototype.evalJSON&&(d='{"a":[1,2,3]}'.evalJSON(),d.a&&3===d.a.length&&3===d.a[2]))a.parse=function(a){return a.evalJSON()};return a.stringify&&
a.parse?(S=function(){return a},a):null};q(f,{version:"2.4.15.118",query:r,stack:{},apply:q,getJSONObject:S,whenReady:v,noConflict:function(a){e.easyXDM=ba;(E=a)&&(t="easyXDM_"+E.replace(".","_")+"_");return f}});f.DomHelper={on:u,un:C,requiresJSON:function(a){"object"==typeof e.JSON&&e.JSON||b.write('<script type="text/javascript" src="'+a+'"><\/script>')}};(function(){var a={};f.Fn={set:function(d,b){a[d]=b},get:function(d,b){var c=a[d];b&&delete a[d];return c}}})();f.Socket=function(a){var b=X(T(a).concat([{incoming:function(b,
d){a.onMessage(b,d)},callback:function(b){if(a.onReady)a.onReady(b)}}])),c=p(a.remote);this.origin=p(a.remote);this.destroy=function(){b.destroy()};this.postMessage=function(a){b.outgoing(a,c)};b.init()};f.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var e=b.local[c];"function"===typeof e&&(b.local[c]={method:e})}var h=X(T(a).concat([new f.stack.RpcBehavior(this,b),{callback:function(b){if(a.onReady)a.onReady(b)}}]));this.origin=p(a.remote);this.destroy=function(){h.destroy()};
h.init()};f.stack.SameOriginTransport=function(a){var b,j,e,h;return b={outgoing:function(a,b,d){e(a);d&&d()},destroy:function(){j&&(j.parentNode.removeChild(j),j=null)},onDOMReady:function(){h=p(a.remote);a.isHost?(q(a.props,{src:A(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:t+a.channel+"_provider"}),j=x(a),f.Fn.set(a.channel,function(a){e=a;g(function(){b.up.callback(!0)},0);return function(a){b.up.incoming(a,h)}})):(e=Z().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,
h)}),g(function(){b.up.callback(!0)},0))},init:function(){v(b.onDOMReady,b)}}};f.stack.FlashTransport=function(a){function d(a){g(function(){e.up.incoming(a,k)},0)}function j(d){var c=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1E4*Math.random());f.Fn.set("flash_loaded"+d.replace(/[\-.]/g,"_"),function(){f.stack.FlashTransport[d].swf=i=l.firstChild;for(var a=f.stack.FlashTransport[d].queue,b=0;b<a.length;b++)a[b]();a.length=0});a.swfContainer?l="string"==typeof a.swfContainer?b.getElementById(a.swfContainer):
a.swfContainer:(l=b.createElement("div"),q(l.style,P&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),b.body.appendChild(l));var j="callback=flash_loaded"+d.replace(/[\-.]/g,"_")+"&proto="+M.location.protocol+"&domain="+M.location.href.match(L)[3]+"&port="+(M.location.href.match(L)[4]||"")+"&ns="+E;l.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+
c+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+c+"'></param><param name='flashvars' value='"+j+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+j+"' allowScriptAccess='always' wmode='transparent' src='"+c+"' height='1' width='1'></embed></object>"}var e,h,k,i,l;return e={outgoing:function(b,d,c){i.postMessage(a.channel,b.toString());c&&c()},destroy:function(){try{i.destroyChannel(a.channel)}catch(b){}i=
null;h&&(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){k=a.remote;f.Fn.set("flash_"+a.channel+"_init",function(){g(function(){e.up.callback(!0)})});f.Fn.set("flash_"+a.channel+"_onMessage",d);a.swf=D(a.swf);var b=a.swf.match(L)[3],o=function(){f.stack.FlashTransport[b].init=!0;i=f.stack.FlashTransport[b].swf;i.createChannel(a.channel,a.secret,p(a.remote),a.isHost);a.isHost&&(P&&a.swfNoThrottle&&q(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),q(a.props,{src:A(a.remote,
{xdm_e:p(c.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:t+a.channel+"_provider"}),h=x(a))};f.stack.FlashTransport[b]&&f.stack.FlashTransport[b].init?o():f.stack.FlashTransport[b]?f.stack.FlashTransport[b].queue.push(o):(f.stack.FlashTransport[b]={queue:[o]},j(b))},init:function(){v(e.onDOMReady,e)}}};f.stack.PostMessageTransport=function(a){function b(d){var e;if(d.origin)e=p(d.origin);else if(d.uri)e=p(d.uri);else if(d.domain)e=c.protocol+"//"+d.domain;else throw"Unable to retrieve the origin of the event";
e==k&&d.data.substring(0,a.channel.length+1)==a.channel+" "&&j.up.incoming(d.data.substring(a.channel.length+1),e)}var j,m,h,k;return j={outgoing:function(b,d,c){h.postMessage(a.channel+" "+b,d||k);c&&c()},destroy:function(){C(e,"message",b);m&&(h=null,m.parentNode.removeChild(m),m=null)},onDOMReady:function(){k=p(a.remote);if(a.isHost){var f=function(c){c.data==a.channel+"-ready"&&(h="postMessage"in m.contentWindow?m.contentWindow:m.contentWindow.document,C(e,"message",f),u(e,"message",b),g(function(){j.up.callback(!0)},
0))};u(e,"message",f);q(a.props,{src:A(a.remote,{xdm_e:p(c.href),xdm_c:a.channel,xdm_p:1}),name:t+a.channel+"_provider"});m=x(a)}else u(e,"message",b),h="postMessage"in e.parent?e.parent:e.parent.document,h.postMessage(a.channel+"-ready",k),g(function(){j.up.callback(!0)},0)},init:function(){v(j.onDOMReady,j)}}};f.stack.FrameElementTransport=function(a){var d,j,m,h;return d={outgoing:function(a,b,d){m.call(this,a);d&&d()},destroy:function(){j&&(j.parentNode.removeChild(j),j=null)},onDOMReady:function(){h=
p(a.remote);if(a.isHost)q(a.props,{src:A(a.remote,{xdm_e:p(c.href),xdm_c:a.channel,xdm_p:5}),name:t+a.channel+"_provider"}),j=x(a),j.fn=function(a){delete j.fn;m=a;g(function(){d.up.callback(!0)},0);return function(a){d.up.incoming(a,h)}};else{if(b.referrer&&p(b.referrer)!=r.xdm_e)e.top.location=r.xdm_e;m=e.frameElement.fn(function(a){d.up.incoming(a,h)});d.up.callback(!0)}},init:function(){v(d.onDOMReady,d)}}};f.stack.NameTransport=function(a){function b(d){l.contentWindow.sendMessage(d,a.remoteHelper+
(i?"#_3":"#_2")+a.channel)}function c(){i?(2===++o||!i)&&k.up.callback(!0):(b("ready"),k.up.callback(!0))}function e(a){k.up.incoming(a,F)}function h(){w&&g(function(){w(!0)},0)}var k,i,l,n,o,w,F,O;return k={outgoing:function(a,c,e){w=e;b(a)},destroy:function(){l.parentNode.removeChild(l);l=null;i&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){i=a.isHost;o=0;F=p(a.remote);a.local=D(a.local);i?(f.Fn.set(a.channel,function(b){i&&"ready"===b&&(f.Fn.set(a.channel,e),c())}),O=A(a.remote,
{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),q(a.props,{src:O+"#"+a.channel,name:t+a.channel+"_provider"}),n=x(a)):(a.remoteHelper=a.remote,f.Fn.set(a.channel,e));l=x({props:{src:a.local+"#_4"+a.channel},onLoad:function da(){var b=l||this;C(b,"load",da);f.Fn.set(a.channel+"_load",h);(function fa(){"function"==typeof b.contentWindow.sendMessage?c():g(fa,50)})()}})},init:function(){v(k.onDOMReady,k)}}};f.stack.HashTransport=function(a){function b(){if(n){var a=n.location.href,d="",e=a.indexOf("#");-1!=
e&&(d=a.substring(e));d&&d!=i&&(i=d,c.up.incoming(i.substring(i.indexOf("_")+1),F))}}var c,f,h,k,i,l,n,o,w,F;return c={outgoing:function(b){if(o)b=a.remote+"#"+l++ +"_"+b,(f||!w?o.contentWindow:o).location=b},destroy:function(){e.clearInterval(h);(f||!w)&&o.parentNode.removeChild(o);o=null},onDOMReady:function(){f=a.isHost;k=a.interval;i="#"+a.channel;l=0;w=a.useParent;F=p(a.remote);if(f){a.props={src:a.remote,name:t+a.channel+"_provider"};if(w)a.onLoad=function(){n=e;h=setInterval(b,k);c.up.callback(!0)};
else{var O=0,ca=a.delay/50;(function ea(){if(++O>ca)throw Error("Unable to reference listenerwindow");try{n=o.contentWindow.frames[t+a.channel+"_consumer"]}catch(e){}n?(h=setInterval(b,k),c.up.callback(!0)):g(ea,50)})()}o=x(a)}else n=e,h=setInterval(b,k),w?(o=parent,c.up.callback(!0)):(q(a,{props:{src:a.remote+"#"+a.channel+new Date,name:t+a.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),o=x(a))},init:function(){v(c.onDOMReady,c)}}};f.stack.ReliableBehavior=function(){var a,b,c=0,e=0,
h="";return a={incoming:function(g,f){var l=g.indexOf("_"),n=g.substring(0,l).split(","),g=g.substring(l+1);n[0]==c&&(h="",b&&b(!0));0<g.length&&(a.down.outgoing(n[1]+","+c+"_"+h,f),e!=n[1]&&(e=n[1],a.up.incoming(g,f)))},outgoing:function(g,f,l){h=g;b=l;a.down.outgoing(e+","+ ++c+"_"+g,f)}}};f.stack.QueueBehavior=function(a){function b(){if(a.remove&&0===e.length)aa(c);else if(!h&&!(0===e.length||i)){h=!0;var f=e.shift();c.down.outgoing(f.data,f.origin,function(a){h=!1;f.callback&&g(function(){f.callback(a)},
0);b()})}}var c,e=[],h=!0,f="",i,l=0,n=!1,o=!1;return c={init:function(){s(a)&&(a={});if(a.maxLength)l=a.maxLength,o=!0;a.lazy?n=!0:c.down.init()},callback:function(a){h=!1;var e=c.up;b();e.callback(a)},incoming:function(b,d){if(o){var e=b.indexOf("_"),g=parseInt(b.substring(0,e),10);f+=b.substring(e+1);0===g&&(a.encode&&(f=I(f)),c.up.incoming(f,d),f="")}else c.up.incoming(b,d)},outgoing:function(f,g,h){a.encode&&(f=H(f));var k=[],i;if(o){for(;0!==f.length;)i=f.substring(0,l),f=f.substring(i.length),
k.push(i);for(;i=k.shift();)e.push({data:k.length+"_"+i,origin:g,callback:0===k.length?h:null})}else e.push({data:f,origin:g,callback:h});n?c.down.init():b()},destroy:function(){i=!0;c.down.destroy()}}};f.stack.VerifyBehavior=function(a){function b(){e=Math.random().toString(16).substring(2);c.down.outgoing(e)}var c,e,f;return c={incoming:function(g,i){var l=g.indexOf("_");-1===l?g===e?c.up.callback(!0):f||(f=g,a.initiate||b(),c.down.outgoing(g)):g.substring(0,l)===f&&c.up.incoming(g.substring(l+
1),i)},outgoing:function(a,b,d){c.down.outgoing(e+"_"+a,b,d)},callback:function(){a.initiate&&b()}}};f.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0";g.down.outgoing(i.stringify(a))}function e(a,b){var d=Array.prototype.slice;return function(){var e=arguments.length,f,g={method:b};0<e&&"function"===typeof arguments[e-1]?(1<e&&"function"===typeof arguments[e-2]?(f={success:arguments[e-2],error:arguments[e-1]},g.params=d.call(arguments,0,e-2)):(f={success:arguments[e-1]},g.params=d.call(arguments,
0,e-1)),n[""+ ++l]=f,g.id=l):g.params=d.call(arguments,0);if(a.namedParams&&1===g.params.length)g.params=g.params[0];c(g)}}function f(a,b,d,e){if(d){var g,h;b?(g=function(a){g=R;c({id:b,result:a})},h=function(a,d){h=R;var e={id:b,error:{code:-32099,message:a}};if(d)e.error.data=d;c(e)}):g=h=R;"[object Array]"===Object.prototype.toString.call(e)||(e=[e]);try{var i=d.method.apply(d.scope,e.concat([g,h]));s(i)||g(i)}catch(k){h(k.message)}}else b&&c({id:b,error:{code:-32601,message:"Procedure not found."}})}
var g,i=b.serializer||S(),l=0,n={};return g={incoming:function(a){a=i.parse(a);if(a.method)b.handle?b.handle(a,c):f(a.method,a.id,b.local[a.method],a.params);else{var e=n[a.id];a.error?e.error&&e.error(a.error):e.success&&e.success(a.result);delete n[a.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&(a[c]=e(b.remote[c],c));g.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];g.down.destroy()}}};M.easyXDM=
f})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);"undefined"==typeof CFW&&(CFW={});jQuery.extend(CFW,{domain:/[.]local/.test(window.location.host)||/yestech/.test(window.location.host)||/squatch/.test(window.location.host)?"http://tameron.herokuapp.com":"http://cfwhiteboard.com"});jQuery(function(){CFW_OPTIONS.athletes_page_path=jQuery.url(CFW_OPTIONS.athletes_page_permalink).attr("path");CFW.athletesRouter=new CFW.AthletesRouter;Backbone.history.start({pushState:!0,root:CFW_OPTIONS.athletes_page_path})});
(function(e){CFW.AthletesRouter=Backbone.Router.extend({routes:{},initialize:function(){this.route("","index");this.route(/(.+)/,"show");return this},_trackPageview:function(){var b=Backbone.history.getFragment();if("undefined"!=typeof _gaq)return _gaq.push(["_trackPageview","/"+b])},index:function(){this.pageView=new CFW.AthletesPage({el:e("body")})},show:function(b){this.pageView=new CFW.AthletePage({el:e("body"),athlete:b})}});CFW.PageBase=Backbone.View.extend({title:function(b){return"undefined"==
typeof b?this._getTraced(".cfw-title-tracer:not(ul *, ol *)"):this._setTraced(".cfw-title-tracer:not(ul *, ol *)",b)},content:function(b){return"undefined"==typeof b?this._getTraced(".cfw-content-tracer"):this._setTraced(".cfw-content-tracer",b)},category:function(b){return"undefined"==typeof b?this._getTraced(".cfw-category-tracer"):this._setTraced(".cfw-category-tracer",b)},tags:function(b){return"undefined"==typeof b?this._getTraced(".cfw-tags-tracer"):this._setTraced(".cfw-tags-tracer",b)},_setTraced:function(b,
c){this.$(b).empty().append(c);"undefined"!=typeof Cufon&&Cufon.refresh();return this},_getTraced:function(b){return this.$(b).children()},openSocket:function(b){this.socket&&this.socket.destroy();var c="socketAPI="+_(this.socketAPI).keys().join(","),b=b+((0<=b.indexOf("?")?"&":"?")+c);this.socket=new easyXDM.Socket({isHost:!0,remote:b,container:this.socketContainer,onMessage:_.bind(this.onSocketMessage,this),props:{seamless:!0,style:{width:"100%",height:"2000px",border:"none",background:"transparent",
"min-width":"480px","max-width":"none"}}})},socketAPI:{navigationRequest:function(b){Backbone.history.fragment=null;var c=_.isUndefined(b.trigger)?!0:b.trigger,e=_.isUndefined(b.replace)?!1:b.replace;CFW.athletesRouter.navigate(b.navigationRequest.replace(CFW_OPTIONS.athletes_page_permalink,""),{trigger:c,replace:e});c&&this.scrollToContent()},socketLocationRequest:function(b){e(this.socketContainer).empty();this.openSocket(b.socketLocationRequest);this.scrollToContent();Backbone.history.fragment=
null;CFW.athletesRouter.navigate(window.location.href.replace(CFW_OPTIONS.athletes_page_permalink,""))},heightRequest:function(b){e(this.socketContainer).find("iframe").height(b.heightRequest)},cssRequest:function(b){e(document.body).append("<style>"+b.cssRequest+"</style>")},scrollRequest:function(b){this.scrollToContent(b.scrollRequest)},modalRequest:function(b){this.openModalSocket(b.modalRequest)}},onSocketMessage:function(b){b=e.parseJSON(b);_.isUndefined(b)||_(b).each(function(c,e){_.isFunction(this.socketAPI[e])&&
this.socketAPI[e].call(this,b)},this)},scrollToContent:function(b){var c=(e(".cfw-content-tracer").offset()||{top:!1}).top;c&&(b=c+(parseInt(b,10)||-50),e("html, body").animate({scrollTop:b},300))},openModalSocket:function(b){var c=new RemotePopup(b);c.done(_.bind(function(c){this.resolveModal(b.id,c)},this));c.fail(_.bind(function(c){this.rejectModal(b.id,c)},this))},resolveModal:function(b,c){this.socket.postMessage(JSON.stringify({resolveModal:{id:b,data:c}}))},rejectModal:function(b,c){this.socket.postMessage(JSON.stringify({rejectModal:{id:b,
data:c}}))}});CFW.AthletesPage=CFW.PageBase.extend({initialize:function(){return this.render()},render:function(){var b=e("<span />");this.socketContainer=b[0];this.openSocket(CFW.domain+"/affiliates/"+CFW_OPTIONS.affiliate_id+"/athletes?baseurl="+CFW_OPTIONS.athletes_page_permalink+"&theme="+CFW_OPTIONS.athletes_theme+"&time_offset="+(new Date).getTimezoneOffset());this.content(b);return this}});CFW.AthletePage=CFW.PageBase.extend({initialize:function(){return this.render()},render:function(){var b=
e("<span />");this.socketContainer=b[0];var c=this.options.athlete.split("?"),g=CFW.domain+"/affiliates/"+CFW_OPTIONS.affiliate_id+"/athletes/"+c[0]+"?baseurl="+CFW_OPTIONS.athletes_page_permalink+"&theme="+CFW_OPTIONS.athletes_theme+"&time_offset="+(new Date).getTimezoneOffset();1<c.length&&(g+="&"+c[1],CFW.athletesRouter.navigate(c[0],{trigger:!1,replace:!0}));this.openSocket(g);this.content(b);return this}})})(jQuery);
(function(e){RemotePopup=function(b){this.options=b;this.deferred=e.Deferred();window.hostAPI&&window.hostAPI.modalRequest?this.requestPopup():this.renderPopup();return this.deferred.promise()};RemotePopup.prototype.requestPopup=function(){this.options.id=(new Date).valueOf();var b=this;e(document.body).on("resolve:socketModal:"+this.options.id,function(c,e){b.resolve(e)});e(document.body).on("reject:socketModal:"+this.options.id,function(c,e){b.reject(e)});e(document.body).trigger("socketMessage",
[{modalRequest:this.options}])};RemotePopup.prototype.renderPopup=function(){this.$el=e(this.template);this.$socketContainer=this.$el.find(".cfw-content-container");e(document.body).append(this.$el);this.blockBodyScroll();this.socket=new easyXDM.Socket({isHost:!0,remote:this.options.src,container:this.$socketContainer[0],onMessage:_.bind(this.onSocketMessage,this)});this.$socketContainer.find("iframe").load(_.bind(this.onSocketReady,this)).css({background:"transparent",border:"none",bottom:"0",height:"100%",
left:"0",margin:"0",padding:"0",position:"absolute",right:"0",top:"0",width:"100%"}).attr("seamless",!0);var b=this;this.$el.on("click",".cfw-modal-close",function(){b.reject()});this.deferred.always(_.bind(this.remove,this))};RemotePopup.prototype.blockBodyScroll=function(){var b=[];e("html, body").each(function(){var c=e(this),g={};g.$el=c;g.css={overflow:c.css("overflow"),"overflow-x":c.css("overflow-x"),"overflow-y":c.css("overflow-y")};b.push(g);c.css("overflow","hidden")});this.originalOverflows=
b};RemotePopup.prototype.restoreBodyScroll=function(){_(this.originalOverflows).each(function(b){b.$el.css(b.css)})};RemotePopup.prototype.onSocketReady=function(){this.$socketContainer.css({display:"block",opacity:"0",transition:"300ms all"});setTimeout(_.bind(function(){this.$socketContainer.css({opacity:"1"})},this),0)};RemotePopup.prototype.onSocketMessage=function(b){b=e.parseJSON(b);if(!_.isUndefined(b)&&(_.isUndefined(b.heightRequest)||this.$socketContainer.find("iframe").height(b.heightRequest),
_.isUndefined(b.cssRequest)||e(document.body).append("<style>"+b.cssRequest+"</style>"),!_.isUndefined(b.resolveWith)||!_.isUndefined(b.rejectWith)))b.resolveWith&&this.resolve(b.resolveWith),b.rejectWith&&this.reject(b.rejectWith)};RemotePopup.prototype.remove=function(){this.restoreBodyScroll();this.$el.css({opacity:0,transition:"300ms all"});setTimeout(_.bind(function(){this.socket.destroy();this.$el.remove()},this),300)};RemotePopup.prototype.resolve=function(b){b?this.deferred.resolveWith({},
[b]):this.deferred.resolve()};RemotePopup.prototype.reject=function(b){b?this.deferred.rejectWith({},[b]):this.deferred.reject()};RemotePopup.prototype.css={container:" bottom: 0 !important; left: 0 !important; margin: 0 !important; overflow: hidden !important; padding: 0 !important; position: fixed !important; right: 0 !important; text-align: center !important; top: 0 !important; -webkit-user-select: none !important; -moz-user-select: none !important; user-select: none !important; z-index: 9999999 !important;",
overlay:" background: white !important; bottom: 0 !important; left: 0 !important; margin: 0 !important; opacity: 0.50 !important; filter: alpha(opacity = 50) !important; position: absolute !important; right: 0 !important; top: 0 !important; z-index: -1 !important;",loading:" background: rgb(44, 62, 80) !important; background: rgba(44, 62, 80, 0.8) !important; bottom: 0 !important; color: #ECF0F1 !important; font-size: 17px !important; font-weight: 300 !important; left: 0 !important; position: absolute !important; padding: 100px !important; right: 0 !important; top: 0 !important;",
close:" color: #fff !important; font-size: 50px !important; font-weight: 300 !important; height: 60px !important; line-height: 1 !important; opacity: 0.50 !important; filter: alpha(opacity = 50) !important; position: absolute !important; right: 0 !important; text-align: center !important; text-decoration: none !important; top: 0 !important; width: 60px !important; z-index: 1 !important;",closeHover:" opacity: 1 !important; filter: alpha(opacity = 100) !important;"};window.self!==window.top&&(RemotePopup.prototype.css.container+=
"\t\tposition: absolute !important;\t");RemotePopup.prototype.template=_.template('<div style="<%- css.container %>"> <div style="<%- css.overlay %>"></div> <div style="<%- css.loading %>">Loading...</div> <div class="cfw-content-container" style="display:none;"></div> <a href="javascript://" class="cfw-modal-close">&times;</a> <style type="text/css">.cfw-modal-close { <%= css.close %> } .cfw-modal-close:hover { <%= css.closeHover %> }</style> </div>')({css:RemotePopup.prototype.css})})(jQuery);
